<!doctype html>
<html lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Stream overlay</title>
		<link rel="stylesheet" href="overlay.css">
	</head>
	<body>
		<div id="tester">I am testing things. I am testing things. I am testing things. I am testing things. I am testing things. I am testing things. </div>
		<canvas id="donation-toast-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="left-bumper-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="right-bumper-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="lower-third-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="table-map-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="table-text-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="now-playing-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="donation-goal-layer" class="main" width="1920" height="1080"></canvas>
		<canvas id="text-layer" class="main" width="1920" height="1080"></canvas>
		
		
		<span id="donation-total">$<span id="donation-amount">0</span></span>
		<span id="local-time"><span id="local-time-hour">11</span>:<span id="local-time-minute">59</span><span id="local-time-ampm">AM</span></span>
		
		<script src="gsap.min.js"></script>
		<script src="jquery-3.6.1.min.js"></script>
		<script src="numberAnimate.js"></script>
		<script src="overlay_canvas.js"></script>
		<script src="overlay_websockets.js"></script>
		<script>
			function update_local_time() {
				let current_time = new Date();
				console.log(current_time);
				let current_hour = current_time.getHours();
				let current_mins = current_time.getMinutes();
				let am_pm = "AM";
				if ( current_hour == 12 ) {
						am_pm = "PM";
				}
				if ( current_hour > 12 ) {
					current_hour -= 12;
					am_pm = "PM";
				}

				if ( current_hour == 0 ) {
					current_hour = 12;
					am_pm = "AM";
				}
				if ( current_mins < 10 ) {
					current_mins = "0" + current_mins;
				}
				/*
				if (hour != undefined) {
					current_hour = hour;	
				}
				if (minute != undefined) {
					current_mins = minute;	
				}
				if (ampm != undefined) {
					am_pm = ampm;	
				}*/
				
				$("#local-time-hour").numberAnimate("set", current_hour);
				$("#local-time-minute").numberAnimate("set", current_mins);
				$("#local-time-ampm").numberAnimate("set", am_pm);
			}
			$(function() {
				$("#donation-amount").numberAnimate({animationTimes: [500, 1200, 500]});
				$("#local-time-hour").numberAnimate();
				$("#local-time-minute").numberAnimate();
				$("#local-time-ampm").numberAnimate();
				setInterval(update_local_time, 100);
			});
			
		</script>
	</body>
</html>
